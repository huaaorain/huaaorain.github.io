---
layout: post
title: "Unity小技巧-菜单场景"
---

## 0、开发背景

&emsp; 本人在使用Unity开发自己的小游戏时遇到了一个问题，即UI系统。最开始这个idea只是午睡时做的一个梦，希望可以开发一款<strong style="color: red;">基于强化学习</strong>中——<strong style="color: red;">多臂老虎机算法</strong>的一个小游戏，没希望开发成一个多大的游戏，因此采用的方法是一个关卡一个场景，为了方便就使用的每个场景一个UI。<br>
&emsp; 这个方法当游戏体量或者说关卡数目较少时可以很方便，但是当关卡数达到两位数时，如果想要做一些UI上的优化就会非常麻烦，因为每个场景都要调整。所以本人想能不能<strong style="color: red;">把UI系统单独建成一个场景</strong>，在每个游戏场景中就不需要UI了，会节省一大部分后续优化的精力。这篇文章就是记录的这种方法。

## 1、游戏构成

&emsp; 为了模拟多场景游戏，一共三个场景：game cube、game sphere、Menu。<br>
&emsp; 其中Menu是纯纯的UI场景，game cube和game sphere中均有一个滑块在左右反复滑动，前者滑块为cube，后者滑块为sphere。<br>
&emsp; 以game Cube为初始场景，以附加的加载方式加载Menu。当点击Menu中的按钮时可以改变滑动物体的颜色和切换场景。当点击button后游戏场景称暂停，并弹出界面，只有将弹出的关掉才会继续运行，如下图。
<img src='/images/skills/Unity开发笔记/Unity小技巧-菜单场景-1、游戏构成.png' width="1500" style="display: block; margin: 0 auto;">

#### 1.1、game cube/sphere场景

&emsp; 两个游戏场景内容上是已一致的，如下图：
<img src='/images/skills/Unity开发笔记/Unity小技巧-菜单场景-1.1、游戏场景1.png' width="800" style="display: block; margin: 0 auto;">
&emsp; 其中Cube/Sphere为屏幕中间左右重复移动的滑块，是个简单的三维物体，点击右键->3D Object->Cube/Sphere创建而成，上面只挂载了一个脚本playerMove.cs：

## C#
```csharp
using System.Collections;
using System.Collections.Generic;
using UnityEngine;
public class playerMove : MonoBehaviour
{
    public GameObject cube;
    public Vector3 curPosition; // 滑块当前的三维坐标
    public int directFlag = 0; // 定义滑块初始移动的方向
    public float speed = 2.0f; // 定义滑块的速度
    void Start()
    {
        speed = 5.0f;
    }
    void Update()
    {
        curPosition = cube.transform.localPosition;
        if (directFlag == 0)
        {
            if (curPosition.x < 9.2)
                curPosition.x += Time.deltaTime * speed; // 改变当前坐标
            else
                directFlag = 1;
        }
        else
        {
            if (curPosition.x > -9.2)
                curPosition.x -= Time.deltaTime * speed; // 改变当前坐标
            else
                directFlag = 0;
        }
        cube.transform.localPosition = curPosition; // 更改滑块的坐标
    }
}

```